<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª - ÙˆØ§Ø­Ø¯ Medic</title>
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, sans-serif;
        }
        
        body {
            background: #0a1929;
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 40px;
            background: #132f4c;
            border-radius: 15px;
            border: 3px solid #ff4757;
            text-align: center;
            display: block;
        }
        
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            display: none;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #132f4c 0%, #0a1929 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-bottom: 4px solid #ff4757;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-header h1 {
            color: #ff4757;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logout-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #1e3a5f;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #2d4a7c;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #4dabf7;
        }
        
        .stat-card h3 {
            color: #4dabf7;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #51cf66;
            margin: 10px 0;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            background: #2d4a7c;
            color: #a5d8ff;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background: #4dabf7;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .applications-table {
            width: 100%;
            background: #132f4c;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #2d4a7c;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 50px 150px 200px 120px 150px 150px 100px;
            background: #1e3a5f;
            padding: 15px;
            font-weight: bold;
            color: #4dabf7;
        }
        
        .application-row {
            display: grid;
            grid-template-columns: 50px 150px 200px 120px 150px 150px 100px;
            padding: 15px;
            border-bottom: 1px solid #2d4a7c;
            align-items: center;
        }
        
        .application-row:nth-child(even) {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .status-pending {
            color: #ffa94d;
            background: rgba(255, 169, 77, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .status-approved {
            color: #51cf66;
            background: rgba(81, 207, 102, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .status-rejected {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 2px;
        }
        
        .approve-btn {
            background: #51cf66;
            color: white;
        }
        
        .reject-btn {
            background: #ff6b6b;
            color: white;
        }
        
        .delete-btn {
            background: #868e96;
            color: white;
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #868e96;
            font-size: 1.1rem;
        }
        
        .admin-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .action-card {
            background: #1e3a5f;
            padding: 20px;
            border-radius: 10px;
            flex: 1;
            min-width: 250px;
            border: 2px solid #2d4a7c;
        }
        
        .action-card h3 {
            color: #4dabf7;
            margin-bottom: 15px;
        }
        
        .export-btn {
            background: #4dabf7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        input[type="password"] {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            background: #0a1929;
            border: 2px solid #2d4a7c;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .login-btn {
            background: #51cf66;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            width: 100%;
        }
        
        .error-message {
            color: #ff6b6b;
            margin-top: 10px;
            display: none;
        }
        
        @media (max-width: 1024px) {
            .table-header, .application-row {
                grid-template-columns: 40px 120px 150px 100px 120px 120px 90px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 768px) {
            .table-header, .application-row {
                grid-template-columns: 1fr;
                display: block;
                padding: 10px;
            }
            
            .table-header div {
                display: none;
            }
            
            .application-row {
                margin-bottom: 15px;
                border: 2px solid #2d4a7c;
                border-radius: 8px;
            }
            
            .application-row > div {
                margin-bottom: 8px;
                padding-bottom: 8px;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            
            .application-row > div:last-child {
                border-bottom: none;
            }
            
            .application-row > div::before {
                content: attr(data-label);
                font-weight: bold;
                color: #4dabf7;
                display: block;
                margin-bottom: 5px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
    <div class="login-container" id="loginContainer">
        <h2>ğŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Medic</h2>
        <p style="color: #a5d8ff; margin: 20px 0;">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
        
        <input type="password" id="adminPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
        <button class="login-btn" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</button>
        
        <div class="error-message" id="loginError">âš ï¸ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!</div>
        
        <p style="color: #868e96; margin-top: 20px; font-size: 0.9rem;">
            ğŸ’¡ Ø±Ù…Ø² Ù¾ÛŒØ´â€ŒÙØ±Ø¶: <code>medic2024</code> (Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯)
        </p>
    </div>
    
    <!-- Ù¾Ù†Ù„ Ø§ØµÙ„ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª -->
    <div class="admin-container" id="adminContainer">
        <!-- Ù‡Ø¯Ø± Ù¾Ù†Ù„ -->
        <div class="admin-header">
            <h1>ğŸ› ï¸ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ§Ø­Ø¯ Medic</h1>
            <button class="logout-btn" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
        </div>
        
        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø± -->
        <div class="stats-cards">
            <div class="stat-card">
                <h3>ğŸ“‹ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª</h3>
                <div class="stat-number" id="totalApplications">0</div>
                <p>Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</p>
            </div>
            
            <div class="stat-card">
                <h3>â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ</h3>
                <div class="stat-number" id="pendingApplications">0</div>
                <p>Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ù‚Ø¯Ø§Ù…</p>
            </div>
            
            <div class="stat-card">
                <h3>ğŸ“¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³</h3>
                <div class="stat-number" id="totalUploads">0</div>
                <p>Ø¢Ù¾Ù„ÙˆØ¯ Ú¯Ø§Ù„Ø±ÛŒ</p>
            </div>
            
            <div class="stat-card">
                <h3>ğŸ‘¥ Ø§Ø¹Ø¶Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡</h3>
                <div class="stat-number" id="approvedMembers">0</div>
                <p>Ù¾Ø±Ø³Ù†Ù„ ÙØ¹Ø§Ù„</p>
            </div>
        </div>
        
        <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('membership')">ğŸ‘¥ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª</button>
            <button class="tab-btn" onclick="showTab('uploads')">ğŸ“¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³</button>
            <button class="tab-btn" onclick="showTab('settings')">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
        </div>
        
        <!-- ØªØ¨ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª -->
        <div class="tab-content active" id="membershipTab">
            <div class="applications-table">
                <div class="table-header">
                    <div>#</div>
                    <div>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</div>
                    <div>Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯</div>
                    <div>Ø³Ø·Ø­ ØªØ¬Ø±Ø¨Ù‡</div>
                    <div>Ø³Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒ</div>
                    <div>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</div>
                    <div>Ø¹Ù…Ù„ÛŒØ§Øª</div>
                </div>
                
                <div id="applicationsList">
                    <!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
            </div>
        </div>
        
        <!-- ØªØ¨ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³ -->
        <div class="tab-content" id="uploadsTab">
            <div class="applications-table">
                <div class="table-header">
                    <div>#</div>
                    <div>Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ù†Ø¯Ù‡</div>
                    <div>ØªÙˆØ¶ÛŒØ­ Ø¹Ú©Ø³</div>
                    <div>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</div>
                    <div>ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„</div>
                    <div>ÙˆØ¶Ø¹ÛŒØª</div>
                    <div>Ø¹Ù…Ù„ÛŒØ§Øª</div>
                </div>
                
                <div id="uploadsList">
                    <!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
            </div>
        </div>
        
        <!-- ØªØ¨ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
        <div class="tab-content" id="settingsTab">
            <div class="admin-actions">
                <div class="action-card">
                    <h3>ğŸ” ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h3>
                    <p>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
                    <input type="password" id="newPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯">
                    <input type="password" id="confirmPassword" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
                    <button class="export-btn" onclick="changePassword()">ØªØºÛŒÛŒØ± Ø±Ù…Ø²</button>
                </div>
                
                <div class="action-card">
                    <h3>ğŸ“¥ Ø®Ø±ÙˆØ¬ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</h3>
                    <p>Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„ Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª:</p>
                    <button class="export-btn" onclick="exportToExcel()">ğŸ“Š Ø®Ø±ÙˆØ¬ÛŒ Excel</button>
                    <button class="export-btn" onclick="exportToJSON()">ğŸ“‹ Ø®Ø±ÙˆØ¬ÛŒ JSON</button>
                </div>
                
                <div class="action-card">
                    <h3>ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h3>
                    <p>Ø­Ø°Ù Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ:</p>
                    <button class="export-btn" style="background: #ff6b6b;" onclick="clearOldData()">ğŸ—‘ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ</button>
                    <p style="color: #868e96; font-size: 0.9rem; margin-top: 10px;">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ£ÛŒÛŒØ¯/Ø±Ø¯ Ø´Ø¯Ù‡ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡
        const ADMIN_PASSWORD_KEY = 'medic_admin_password';
        const DEFAULT_PASSWORD = 'medic2024';
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ú¯Ø± Ø±Ù…Ø² Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
        if (!localStorage.getItem(ADMIN_PASSWORD_KEY)) {
            localStorage.setItem(ADMIN_PASSWORD_KEY, DEFAULT_PASSWORD);
        }
        
        // ØªØ§Ø¨Ø¹ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„
        function login() {
            const passwordInput = document.getElementById('adminPassword').value;
            const savedPassword = localStorage.getItem(ADMIN_PASSWORD_KEY);
            const errorDiv = document.getElementById('loginError');
            
            if (passwordInput === savedPassword) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('adminContainer').style.display = 'block';
                loadAdminData();
            } else {
                errorDiv.style.display = 'block';
                document.getElementById('adminPassword').style.borderColor = '#ff6b6b';
            }
        }
        
        // ØªØ§Ø¨Ø¹ Ø®Ø±ÙˆØ¬
        function logout() {
            document.getElementById('loginContainer').style.display = 'block';
            document.getElementById('adminContainer').style.display = 'none';
            document.getElementById('adminPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
            document.getElementById('adminPassword').style.borderColor = '#2d4a7c';
        }
        
        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ØªØ¨
        function showTab(tabName) {
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù…Ø±Ø¨ÙˆØ·Ù‡
            event.target.classList.add('active');
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¨
            if (tabName === 'membership') {
                loadApplications();
            } else if (tabName === 'uploads') {
                loadUploads();
            }
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª
        function loadAdminData() {
            loadApplications();
            updateStats();
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª
        function loadApplications() {
            const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
            const applicationsList = document.getElementById('applicationsList');
            
            if (applications.length === 0) {
                applicationsList.innerHTML = '<div class="no-data">ğŸ“­ Ù‡Ù†ÙˆØ² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ø¶ÙˆÛŒØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>';
                return;
            }
            
            let html = '';
            
            applications.forEach((app, index) => {
                const statusClass = app.status === 'approved' ? 'status-approved' : 
                                   app.status === 'rejected' ? 'status-rejected' : 'status-pending';
                const statusText = app.status === 'approved' ? 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 
                                  app.status === 'rejected' ? 'Ø±Ø¯ Ø´Ø¯Ù‡' : 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                
                html += `
                    <div class="application-row" data-label="Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ø¶ÙˆÛŒØª">
                        <div data-label="Ø´Ù…Ø§Ø±Ù‡">${index + 1}</div>
                        <div data-label="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"><strong>${app.gameUsername || '---'}</strong></div>
                        <div data-label="Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯">${app.discordId || '---'}</div>
                        <div data-label="Ø³Ø·Ø­ ØªØ¬Ø±Ø¨Ù‡">${getExperienceText(app.experience)}</div>
                        <div data-label="Ø³Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒ">${getPlayTimeText(app.playTime)}</div>
                        <div data-label="ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª">${app.timestamp || '---'}</div>
                        <div data-label="Ø¹Ù…Ù„ÛŒØ§Øª">
                            ${app.status === 'pending' ? `
                                <button class="action-btn approve-btn" onclick="updateStatus(${index}, 'approved')">ØªØ£ÛŒÛŒØ¯</button>
                                <button class="action-btn reject-btn" onclick="updateStatus(${index}, 'rejected')">Ø±Ø¯</button>
                            ` : ''}
                            <button class="action-btn delete-btn" onclick="deleteApplication(${index})">Ø­Ø°Ù</button>
                            <span class="${statusClass}">${statusText}</span>
                        </div>
                    </div>
                `;
            });
            
            applicationsList.innerHTML = html;
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³
        function loadUploads() {
            const uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
            const uploadsList = document.getElementById('uploadsList');
            
            if (uploads.length === 0) {
                uploadsList.innerHTML = '<div class="no-data">ğŸ“­ Ù‡Ù†ÙˆØ² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>';
                return;
            }
            
            let html = '';
            
            uploads.forEach((upload, index) => {
                const statusClass = upload.status === 'approved' ? 'status-approved' : 
                                   upload.status === 'rejected' ? 'status-rejected' : 'status-pending';
                const statusText = upload.status === 'approved' ? 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 
                                  upload.status === 'rejected' ? 'Ø±Ø¯ Ø´Ø¯Ù‡' : 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                
                const categoryText = {
                    'operations': 'Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§',
                    'team': 'ØªÛŒÙ… Medic',
                    'vehicles': 'ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡',
                    'training': 'Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§'
                }[upload.category] || upload.category;
                
                html += `
                    <div class="application-row" data-label="Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ú©Ø³">
                        <div data-label="Ø´Ù…Ø§Ø±Ù‡">${index + 1}</div>
                        <div data-label="Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ù†Ø¯Ù‡"><strong>${upload.name || '---'}</strong></div>
                        <div data-label="ØªÙˆØ¶ÛŒØ­ Ø¹Ú©Ø³">${upload.description || '---'}</div>
                        <div data-label="Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ">${categoryText}</div>
                        <div data-label="ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„">${upload.date || '---'}</div>
                        <div data-label="Ø¹Ù…Ù„ÛŒØ§Øª">
                            ${upload.status === 'pending' ? `
                                <button class="action-btn approve-btn" onclick="updateUploadStatus(${index}, 'approved')">ØªØ£ÛŒÛŒØ¯</button>
                                <button class="action-btn reject-btn" onclick="updateUploadStatus(${index}, 'rejected')">Ø±Ø¯</button>
                            ` : ''}
                            <button class="action-btn delete-btn" onclick="deleteUpload(${index})">Ø­Ø°Ù</button>
                            <span class="${statusClass}">${statusText}</span>
                        </div>
                    </div>
                `;
            });
            
            uploadsList.innerHTML = html;
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±
        function updateStats() {
            const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
            const uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
            
            // ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§
            document.getElementById('totalApplications').textContent = applications.length;
            
            // ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
            const pendingApps = applications.filter(app => app.status === 'pending').length;
            document.getElementById('pendingApplications').textContent = pendingApps;
            
            // ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ú©Ø³
            document.getElementById('totalUploads').textContent = uploads.length;
            
            // ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ø¶Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
            const approvedMembers = applications.filter(app => app.status === 'approved').length;
            document.getElementById('approvedMembers').textContent = approvedMembers;
        }
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª
        function updateStatus(index, newStatus) {
            const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
            
            if (index >= 0 && index < applications.length) {
                applications[index].status = newStatus;
                applications[index].processedDate = new Date().toLocaleString('fa-IR');
                
                localStorage.setItem('medicApplications', JSON.stringify(applications));
                
                // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
                const username = applications[index].gameUsername;
                alert(`âœ… ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª ${username} Ø¨Ù‡ "${newStatus === 'approved' ? 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 'Ø±Ø¯ Ø´Ø¯Ù‡'}" ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.`);
                
                // Ø¨Ø§Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                loadApplications();
                updateStats();
            }
        }
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯
        function updateUploadStatus(index, newStatus) {
            const uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
            
            if (index >= 0 && index < uploads.length) {
                uploads[index].status = newStatus;
                uploads[index].processedDate = new Date().toLocaleString('fa-IR');
                
                localStorage.setItem('galleryUploads', JSON.stringify(uploads));
                
                // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
                const uploader = uploads[index].name;
                alert(`âœ… ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ú©Ø³ ${uploader} Ø¨Ù‡ "${newStatus === 'approved' ? 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 'Ø±Ø¯ Ø´Ø¯Ù‡'}" ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.`);
                
                // Ø¨Ø§Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                loadUploads();
                updateStats();
            }
        }
        
        // Ø­Ø°Ù Ø¯Ø±Ø®ÙˆØ§Ø³Øª
        function deleteApplication(index) {
            if (confirm('âš ï¸ Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
                
                if (index >= 0 && index < applications.length) {
                    applications.splice(index, 1);
                    localStorage.setItem('medicApplications', JSON.stringify(applications));
                    
                    alert('ğŸ—‘ï¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø­Ø°Ù Ø´Ø¯.');
                    
                    // Ø¨Ø§Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                    loadApplications();
                    updateStats();
                }
            }
        }
        
        // Ø­Ø°Ù Ø¢Ù¾Ù„ÙˆØ¯
        function deleteUpload(index) {
            if (confirm('âš ï¸ Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                const uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
                
                if (index >= 0 && index < uploads.length) {
                    uploads.splice(index, 1);
                    localStorage.setItem('galleryUploads', JSON.stringify(uploads));
                    
                    alert('ğŸ—‘ï¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø­Ø°Ù Ø´Ø¯.');
                    
                    // Ø¨Ø§Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                    loadUploads();
                    updateStats();
                }
            }
        }
        
        // ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
        function changePassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!newPassword || !confirmPassword) {
                alert('âš ï¸ Ù„Ø·ÙØ§Ù‹ Ù‡Ø± Ø¯Ùˆ ÙÛŒÙ„Ø¯ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('âš ï¸ Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ù†Ø¯.');
                return;
            }
            
            if (newPassword.length < 6) {
                alert('âš ï¸ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯.');
                return;
            }
            
            localStorage.setItem(ADMIN_PASSWORD_KEY, newPassword);
            
            alert('âœ… Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.');
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }
        
        // Ø®Ø±ÙˆØ¬ÛŒ Ø§Ú©Ø³Ù„
        function exportToExcel() {
            const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
            
            if (applications.length === 0) {
                alert('âš ï¸ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
                return;
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø§Ø®ØªØ§Ø± CSV Ø³Ø§Ø¯Ù‡
            let csv = 'Ø´Ù…Ø§Ø±Ù‡,Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ,Ø¯ÛŒØ³Ú©ÙˆØ±Ø¯,Ø³Ø·Ø­ ØªØ¬Ø±Ø¨Ù‡,Ø³Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒ,ØªÙˆØ¶ÛŒØ­,ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª,ÙˆØ¶Ø¹ÛŒØª\n';
            
            applications.forEach((app, index) => {
                csv += `${index + 1},${app.gameUsername || ''},${app.discordId || ''},${getExperienceText(app.experience) || ''},${getPlayTimeText(app.playTime) || ''},"${app.whyJoin || ''}",${app.timestamp || ''},${app.status || 'pending'}\n`;
            });
            
            // Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯
            const blob = new Blob(['\uFEFF' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `medic-applications-${new Date().toISOString().slice(0,10)}.csv`;
            link.click();
            
            alert(`âœ… ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„ Ø¨Ø§ ${applications.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯.`);
        }
        
        // Ø®Ø±ÙˆØ¬ÛŒ JSON
        function exportToJSON() {
            const applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
            const uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
            
            const data = {
                exportDate: new Date().toLocaleString('fa-IR'),
                applications: applications,
                uploads: uploads
            };
            
            const jsonStr = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `medic-data-${new Date().toISOString().slice(0,10)}.json`;
            link.click();
            
            alert(`âœ… ÙØ§ÛŒÙ„ JSON Ø¨Ø§ ${applications.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ùˆ ${uploads.length} Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯.`);
        }
        
        // Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
        function clearOldData() {
            if (confirm('âš ï¸ Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ\n\nØ¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ£ÛŒÛŒØ¯/Ø±Ø¯ Ø´Ø¯Ù‡ Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯.')) {
                let applications = JSON.parse(localStorage.getItem('medicApplications') || '[]');
                let uploads = JSON.parse(localStorage.getItem('galleryUploads') || '[]');
                
                // Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ† ÙÙ‚Ø· Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ
                const oldAppsCount = applications.length;
                applications = applications.filter(app => app.status === 'pending');
                
                const oldUploadsCount = uploads.length;
                uploads = uploads.filter(upload => upload.status === 'pending');
                
                // Ø°Ø®ÛŒØ±Ù‡ Ù…Ø¬Ø¯Ø¯
                localStorage.setItem('medicApplications', JSON.stringify(applications));
                localStorage.setItem('galleryUploads', JSON.stringify(uploads));
                
                alert(`ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯:\n\nğŸ—‘ï¸ ${oldAppsCount - applications.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ø¶ÙˆÛŒØª Ø­Ø°Ù Ø´Ø¯\nğŸ—‘ï¸ ${oldUploadsCount - uploads.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ú©Ø³ Ø­Ø°Ù Ø´Ø¯\n\nğŸ“‹ ${applications.length} Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ùˆ ${uploads.length} Ø¢Ù¾Ù„ÙˆØ¯ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡.`);
                
                // Ø¨Ø§Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                loadApplications();
                loadUploads();
                updateStats();
            }
        }
        
        // ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ
        function getExperienceText(exp) {
            const experiences = {
                'beginner': 'ØªØ§Ø²Ù‡â€ŒÚ©Ø§Ø±',
                'intermediate': 'Ù…ØªÙˆØ³Ø·',
                'advanced': 'Ù¾ÛŒØ´Ø±ÙØªÙ‡'
            };
            return experiences[exp] || exp;
        }
        
        function getPlayTimeText(time) {
            const times = {
                'low': 'Ú©Ù…ØªØ± Ø§Ø² Û±Û° Ø³Ø§Ø¹Øª',
                'medium': 'Û±Û°-Û²Û° Ø³Ø§Ø¹Øª',
                'high': 'Ø¨ÛŒØ´ Ø§Ø² Û²Û° Ø³Ø§Ø¹Øª'
            };
            return times[time] || time;
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ù„Ø§Ú¯ÛŒÙ† Ú©Ø±Ø¯Ù‡
        window.onload = function() {
            // Ø§Ú¯Ø± Ú©ÙˆØ¦Ø±ÛŒ Ø§Ø³ØªØ±ÛŒÙ†Ú¯ Ø­Ø§ÙˆÛŒ Ù¾Ø³ÙˆØ±Ø¯ Ø¨Ø§Ø´Ø¯
            const urlParams = new URLSearchParams(window.location.search);
            const autoLogin = urlParams.get('admin');
            
            if (autoLogin === 'true') {
                document.getElementById('adminPassword').value = localStorage.getItem(ADMIN_PASSWORD_KEY);
                login();
            }
        };
    </script>
</body>
</html>